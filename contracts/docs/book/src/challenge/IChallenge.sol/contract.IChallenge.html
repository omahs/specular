<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>IChallenge</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../book.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../../index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item expanded "><a href="../../../src/challenge/index.html">❱ challenge</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/challenge/verifier/index.html">❱ verifier</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/challenge/verifier/IVerificationContext.sol/contract.IVerificationContext.html">IVerificationContext</a></li><li class="chapter-item "><a href="../../../src/challenge/verifier/IVerifier.sol/contract.IVerifier.html">IVerifier</a></li><li class="chapter-item "><a href="../../../src/challenge/verifier/Verifier.sol/contract.Verifier.html">Verifier</a></li></ol></li><li class="chapter-item "><a href="../../../src/challenge/Challenge.sol/contract.Challenge.html">Challenge</a></li><li class="chapter-item "><a href="../../../src/challenge/ChallengeLib.sol/contract.ChallengeLib.html">ChallengeLib</a></li><li class="chapter-item expanded "><a href="../../../src/challenge/IChallenge.sol/contract.IChallenge.html" class="active">IChallenge</a></li></ol></li><li class="chapter-item "><a href="../../../src/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/libraries/BytesLib.sol/contract.BytesLib.html">BytesLib</a></li><li class="chapter-item "><a href="../../../src/libraries/DeserializationLib.sol/contract.DeserializationLib.html">DeserializationLib</a></li><li class="chapter-item "><a href="../../../src/libraries/Errors.sol/error.NotRollup.html">NotRollup</a></li><li class="chapter-item "><a href="../../../src/libraries/Errors.sol/error.NotChallenge.html">NotChallenge</a></li><li class="chapter-item "><a href="../../../src/libraries/Errors.sol/error.NotSequencer.html">NotSequencer</a></li><li class="chapter-item "><a href="../../../src/libraries/Errors.sol/error.ZeroAddress.html">ZeroAddress</a></li></ol></li><li class="chapter-item "><a href="../../../src/pre-deploy/index.html">❱ pre-deploy</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/pre-deploy/Faucet.sol/contract.Faucet.html">Faucet</a></li></ol></li><li class="chapter-item "><a href="../../../src/AssertionMap.sol/contract.AssertionMap.html">AssertionMap</a></li><li class="chapter-item "><a href="../../../src/IRollup.sol/contract.IRollup.html">IRollup</a></li><li class="chapter-item "><a href="../../../src/ISequencerInbox.sol/contract.ISequencerInbox.html">ISequencerInbox</a></li><li class="chapter-item "><a href="../../../src/Rollup.sol/contract.RollupBase.html">RollupBase</a></li><li class="chapter-item "><a href="../../../src/Rollup.sol/contract.Rollup.html">Rollup</a></li><li class="chapter-item "><a href="../../../src/RollupLib.sol/contract.RollupLib.html">RollupLib</a></li><li class="chapter-item "><a href="../../../src/SequencerInbox.sol/contract.SequencerInbox.html">SequencerInbox</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/SpecularL2/specular" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ichallenge"><a class="header" href="#ichallenge">IChallenge</a></h1>
<p><a href="https://github.com/SpecularL2/specular/blob/45f44372b1909409b6e594b9cedf660988f36db2/src/challenge/IChallenge.sol">Git Source</a></p>
<p>Protocol execution:
<code>initialize</code> (challenger, via Rollup) -&gt;
<code>initializeChallengeLength</code> (defender) -&gt;
<code>bisectExecution</code> (challenger, defender -- alternating) -&gt;
<code>verifyOneStepProof</code></p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p>Initializes contract.</p>
<pre><code class="language-solidity">function initialize(
    address _defender,
    address _challenger,
    IVerifier _verifier,
    address _resultReceiver,
    bytes32 _startStateHash,
    bytes32 _endStateHash
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_defender</code></td><td><code>address</code></td><td>Defending party.</td></tr>
<tr><td><code>_challenger</code></td><td><code>address</code></td><td>Challenging party. Challenger starts.</td></tr>
<tr><td><code>_verifier</code></td><td><code>IVerifier</code></td><td>Address of the verifier contract.</td></tr>
<tr><td><code>_resultReceiver</code></td><td><code>address</code></td><td>Address of contract that will receive the outcome (via callback <code>completeChallenge</code>).</td></tr>
<tr><td><code>_startStateHash</code></td><td><code>bytes32</code></td><td>Bisection root being challenged.</td></tr>
<tr><td><code>_endStateHash</code></td><td><code>bytes32</code></td><td>Bisection root being challenged.</td></tr>
</tbody></table>
</div>
<h3 id="initializechallengelength"><a class="header" href="#initializechallengelength">initializeChallengeLength</a></h3>
<p>Initializes the length of the challenge. Must be called by defender before bisection rounds begin.</p>
<pre><code class="language-solidity">function initializeChallengeLength(uint256 _numSteps) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_numSteps</code></td><td><code>uint256</code></td><td>Number of steps executed from the start of the assertion to its end. If this parameter is incorrect, the defender will be slashed (assuming successful execution of the protocol by the challenger).</td></tr>
</tbody></table>
</div>
<h3 id="bisectexecution"><a class="header" href="#bisectexecution">bisectExecution</a></h3>
<p>Bisects a segment. The challenged segment is defined by: {<code>challengedSegmentStart</code>, <code>challengedSegmentLength</code>, <code>bisection[0]</code>, <code>oldEndHash</code>}</p>
<pre><code class="language-solidity">function bisectExecution(
    bytes32[] calldata bisection,
    uint256 challengedSegmentIndex,
    bytes32[] calldata prevBisection,
    uint256 prevChallengedSegmentStart,
    uint256 prevChallengedSegmentLength
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bisection</code></td><td><code>bytes32[]</code></td><td>Bisection of challenged segment. Each element is a state hash (see <code>ChallengeLib.stateHash</code>). The first element is the last agreed upon state hash. Must be of length MAX_BISECTION_LENGTH for all rounds except the last. In the last round, the bisection segments must be single steps.</td></tr>
<tr><td><code>challengedSegmentIndex</code></td><td><code>uint256</code></td><td>Index into <code>prevBisection</code>. Must be greater than 0 (since the first is agreed upon).</td></tr>
<tr><td><code>prevBisection</code></td><td><code>bytes32[]</code></td><td>Bisection in the preceding round.</td></tr>
<tr><td><code>prevChallengedSegmentStart</code></td><td><code>uint256</code></td><td>Offset of the segment challenged in the preceding round (in steps). Note: this is relative to the assertion being challenged (i.e. always between 0 and the initial <code>numSteps</code>).</td></tr>
<tr><td><code>prevChallengedSegmentLength</code></td><td><code>uint256</code></td><td>Length of the segment challenged in the preceding round (in steps).</td></tr>
</tbody></table>
</div>
<h3 id="verifyonestepproof"><a class="header" href="#verifyonestepproof">verifyOneStepProof</a></h3>
<p>Verifies one step proof and completes challenge protocol.</p>
<pre><code class="language-solidity">function verifyOneStepProof(
    bytes memory proof,
    uint256 challengedStepIndex,
    bytes32[] calldata prevBisection,
    uint256 prevChallengedSegmentStart,
    uint256 prevChallengedSegmentLength
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proof</code></td><td><code>bytes</code></td><td>TODO.</td></tr>
<tr><td><code>challengedStepIndex</code></td><td><code>uint256</code></td><td>Index into <code>prevBisection</code>. Must be greater than 0 (since the first is agreed upon).</td></tr>
<tr><td><code>prevBisection</code></td><td><code>bytes32[]</code></td><td>Bisection in the preceding round. Each segment must now be of length 1 (i.e. a single step).</td></tr>
<tr><td><code>prevChallengedSegmentStart</code></td><td><code>uint256</code></td><td>Offset of the segment challenged in the preceding round (in steps). Note: this is relative to the assertion being challenged (i.e. always between 0 and the initial <code>numSteps</code>).</td></tr>
<tr><td><code>prevChallengedSegmentLength</code></td><td><code>uint256</code></td><td>Length of the segment challenged in the preceding round (in steps).</td></tr>
</tbody></table>
</div>
<h3 id="timeout"><a class="header" href="#timeout">timeout</a></h3>
<p>Triggers completion of challenge protocol if a responder timed out.</p>
<pre><code class="language-solidity">function timeout() external;
</code></pre>
<h3 id="currentresponder"><a class="header" href="#currentresponder">currentResponder</a></h3>
<pre><code class="language-solidity">function currentResponder() external view returns (address);
</code></pre>
<h3 id="currentrespondertimeleft"><a class="header" href="#currentrespondertimeleft">currentResponderTimeLeft</a></h3>
<pre><code class="language-solidity">function currentResponderTimeLeft() external view returns (uint256);
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="challengecompleted"><a class="header" href="#challengecompleted">ChallengeCompleted</a></h3>
<pre><code class="language-solidity">event ChallengeCompleted(address winner, address loser, CompletionReason reason);
</code></pre>
<h3 id="bisected"><a class="header" href="#bisected">Bisected</a></h3>
<pre><code class="language-solidity">event Bisected(bytes32 challengeState, uint256 challengedSegmentStart, uint256 challengedSegmentLength);
</code></pre>
<h2 id="enums"><a class="header" href="#enums">Enums</a></h2>
<h3 id="completionreason"><a class="header" href="#completionreason">CompletionReason</a></h3>
<pre><code class="language-solidity">enum CompletionReason {
    OSP_VERIFIED,
    TIMEOUT
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../src/challenge/ChallengeLib.sol/contract.ChallengeLib.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../src/libraries/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../src/challenge/ChallengeLib.sol/contract.ChallengeLib.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../src/libraries/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../solidity.min.js"></script>


    </body>
</html>
